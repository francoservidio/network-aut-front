<main-toolbar>
    <md-button ng-click="goBack()" class="md-icon-button">
        <md-icon aria-label="arrow back" class="material-icons">arrow_back</md-icon>
        <md-tooltip md-direction="bottom">Go back</md-tooltip>
    </md-button>

    <h1 flex style="text-align: center">Historia Clinica -> {{ paciente.datosCliente.nombre + " " + paciente.datosCliente.apellido }}</h1>

    <md-button ng-disabled="!allowedToSave" ng-click="updatePaciente()" class="md-raised md-primary">Guardar Cambios</md-button>

</main-toolbar>
<md-card>
    <md-card-content>

        <md-tabs md-dynamic-height md-border-bottom>
            <md-tab label="Datos del Ojo">
                <div layout="row" flex>
                    <div style=" padding: 10px" layout="column" flex>
                        <h1 class="md-headline">Orbita Izquierda</h1>
                        <md-input-container class="md-block">
                            <label>Sistema Lagrimal</label>
                            <textarea ng-model="paciente.historiaClinica.orbitas[0].sistemaLagrimal" md-maxlength="200" md-select-on-focus></textarea>
                        </md-input-container>
                        <md-input-container class="md-block">
                            <label>Musculos Extraoculares</label>
                            <textarea ng-model="paciente.historiaClinica.orbitas[0].musculosExtraoculares" md-maxlength="200" md-select-on-focus></textarea>
                        </md-input-container>
                        <md-input-container class="md-block">
                            <label>Vasos</label>
                            <textarea ng-model="paciente.historiaClinica.orbitas[0].vasos" md-maxlength="200" md-select-on-focus></textarea>
                        </md-input-container>
                        <md-input-container class="md-block">
                            <label>Nervios</label>
                            <textarea ng-model="paciente.historiaClinica.orbitas[0].nervios" md-maxlength="200" md-select-on-focus></textarea>
                        </md-input-container>
                        <md-input-container class="md-block">
                            <label>Parpados</label>
                            <textarea ng-model="paciente.historiaClinica.orbitas[0].parpados" md-maxlength="200" md-select-on-focus></textarea>
                        </md-input-container>
                        <md-input-container class="md-block">
                            <label>Nervios Opticos</label>
                            <textarea ng-model="paciente.historiaClinica.orbitas[0].nerviosOpticos" md-maxlength="200" md-select-on-focus></textarea>
                        </md-input-container>

                        <h1 class="md-headline">Ojo Izquierdo</h1>
                        <md-input-container class="md-block">
                            <label>Caracteristicas Generales</label>
                            <textarea ng-model="paciente.historiaClinica.orbitas[0].caracteristicasGenerales" md-maxlength="200" md-select-on-focus></textarea>
                        </md-input-container>
                        <md-input-container class="md-block">
                            <label>Cristalino</label>
                            <textarea ng-model="paciente.historiaClinica.orbitas[0].cristalino" md-maxlength="200" md-select-on-focus></textarea>
                        </md-input-container>
                        <md-input-container class="md-block">
                            <label>Agudeza Visual</label>
                            <textarea ng-model="paciente.historiaClinica.orbitas[0].agudezaVisual" md-maxlength="200" md-select-on-focus></textarea>
                        </md-input-container>
                        <md-input-container class="md-block">
                            <label>Conjuntiva</label>
                            <textarea ng-model="paciente.historiaClinica.orbitas[0].conjuntiva" md-maxlength="200" md-select-on-focus></textarea>
                        </md-input-container>
                        <md-input-container class="md-icon-float md-icon-right md-block">
                            <label>Longitud (mm)</label>
                            <input ng-model="paciente.historiaClinica.orbitas[0].longitud" type="number" step="0.01">
                        </md-input-container>

                        <h1 class="md-headline">Segmento anterior (izquierda)</h1>
                        <md-input-container class="md-block">
                            <label>Presion Ocular</label>
                            <textarea ng-model="paciente.historiaClinica.orbitas[0].presionOcular" md-maxlength="200" md-select-on-focus></textarea>
                        </md-input-container>
                        <md-input-container class="md-block">
                            <label>Pupila</label>
                            <textarea ng-model="paciente.historiaClinica.orbitas[0].pupila" md-maxlength="200" md-select-on-focus></textarea>
                        </md-input-container>
                        <md-switch style="padding-left: 10px" ng-model="paciente.historiaClinica.orbitas[0].anguloIridoCorneal" aria-label="Switch 1">
                            Angulo Irido Corneal
                        </md-switch>

                        <h1 class="md-headline">Segmento posterior (izquierdo)</h1>

                        <md-input-container class="md-block">
                            <label>Humor Vitreo</label>
                            <textarea ng-model="paciente.historiaClinica.orbitas[0].humorVitreo" md-maxlength="200" md-select-on-focus></textarea>
                        </md-input-container>

                        <md-input-container class="md-block">
                            <label>Papila</label>
                            <textarea ng-model="paciente.historiaClinica.orbitas[0].papila" md-maxlength="200" md-select-on-focus></textarea>
                        </md-input-container>

                        <md-input-container class="md-block">
                            <label>Retina Periferica</label>
                            <textarea ng-model="paciente.historiaClinica.orbitas[0].retinaPeriferica" md-maxlength="200" md-select-on-focus></textarea>
                        </md-input-container>

                        <md-input-container class="md-block">
                            <label>Retina Central</label>
                            <textarea ng-model="paciente.historiaClinica.orbitas[0].retinaCentral" md-maxlength="200" md-select-on-focus></textarea>
                        </md-input-container>

                        <h1 class="md-headline">Capa 1 (izquierda)</h1>

                        <div layout="row" flex>
                            <md-input-container class="md-icon-float md-icon-right md-block" flex>
                                <label>Espesor Cornea (mm)</label>
                                <input ng-model="paciente.historiaClinica.orbitas[0].espesorCorneal" type="number" step="0.01">
                            </md-input-container>
                            <md-input-container class="md-icon-float md-icon-right md-block" flex>
                                <label>Curvatura (mm)</label>
                                <input ng-model="paciente.historiaClinica.orbitas[0].curvatura" type="number" step="0.01">
                            </md-input-container>
                            <md-input-container class="md-icon-float md-icon-right md-block" flex>
                                <label>Numero de Celulas (mm)</label>
                                <input ng-model="paciente.historiaClinica.orbitas[0].numeroDeCelulas" type="number" step="0.01">
                            </md-input-container>
                        </div>

                        <md-input-container class="md-block">
                            <label>Caracteristicas Generales</label>
                            <textarea ng-model="paciente.historiaClinica.orbitas[0].capa1Caracteristicas" md-maxlength="200" md-select-on-focus></textarea>
                        </md-input-container>

                        <h1 class="md-headline">Capa 2 (izquierda)</h1>

                        <md-input-container class="md-block">
                            <label>Caracteristicas Generales</label>
                            <textarea ng-model="paciente.historiaClinica.orbitas[0].capa2Caracteristicas" md-maxlength="200" md-select-on-focus></textarea>
                        </md-input-container>

                        <h1 class="md-headline">Capa 3 (izquierda)</h1>

                        <div layout="row" flex>
                            <md-input-container class="md-icon-float md-icon-right md-block" flex>
                                <label>Espesor Retina (mm)</label>
                                <input ng-model="paciente.historiaClinica.orbitas[0].espesorRetina" type="number" step="0.01">
                            </md-input-container>
                            <md-input-container class="md-icon-float md-icon-right md-block" flex>
                                <label>Espesor Fovea (mm)</label>
                                <input ng-model="paciente.historiaClinica.orbitas[0].espesorFoveal" type="number" step="0.01">
                            </md-input-container>
                        </div>

                        <md-input-container class="md-block">
                            <label>Caracteristicas Generales</label>
                            <textarea ng-model="paciente.historiaClinica.orbitas[0].capa3Caracteristicas" md-maxlength="200" md-select-on-focus></textarea>
                        </md-input-container>

                    </div>
                    <div style="padding: 10px" layout="column" flex>
                        <h1 class="md-headline">Orbita Derecha</h1>
                        <md-input-container class="md-block">
                            <label>Sistema Lagrimal</label>
                            <textarea ng-model="paciente.historiaClinica.orbitas[1].sistemaLagrimal" md-maxlength="200" md-select-on-focus></textarea>
                        </md-input-container>
                        <md-input-container class="md-block">
                            <label>Musculos Extraoculares</label>
                            <textarea ng-model="paciente.historiaClinica.orbitas[1].musculosExtraoculares" md-maxlength="200" md-select-on-focus></textarea>
                        </md-input-container>
                        <md-input-container class="md-block">
                            <label>Vasos</label>
                            <textarea ng-model="paciente.historiaClinica.orbitas[1].vasos" md-maxlength="200" md-select-on-focus></textarea>
                        </md-input-container>
                        <md-input-container class="md-block">
                            <label>Nervios</label>
                            <textarea ng-model="paciente.historiaClinica.orbitas[1].nervios" md-maxlength="200" md-select-on-focus></textarea>
                        </md-input-container>
                        <md-input-container class="md-block">
                            <label>Parpados</label>
                            <textarea ng-model="paciente.historiaClinica.orbitas[1].parpados" md-maxlength="200" md-select-on-focus></textarea>
                        </md-input-container>
                        <md-input-container class="md-block">
                            <label>Nervios Opticos</label>
                            <textarea ng-model="paciente.historiaClinica.orbitas[1].nerviosOpticos" md-maxlength="200" md-select-on-focus></textarea>
                        </md-input-container>


                        <h1 class="md-headline">Ojo Derecho</h1>
                        <md-input-container class="md-block">
                            <label>Caracteristicas Originales</label>
                            <textarea ng-model="paciente.historiaClinica.orbitas[1].caracteristicasGenerales" md-maxlength="200" md-select-on-focus></textarea>
                        </md-input-container>
                        <md-input-container class="md-block">
                            <label>Cristalino</label>
                            <textarea ng-model="paciente.historiaClinica.orbitas[1].cristalino" md-maxlength="200" md-select-on-focus></textarea>
                        </md-input-container>
                        <md-input-container class="md-block">
                            <label>Agudeza Visual</label>
                            <textarea ng-model="paciente.historiaClinica.orbitas[1].agudezaVisual" md-maxlength="200" md-select-on-focus></textarea>
                        </md-input-container>
                        <md-input-container class="md-block">
                            <label>Conjuntiva</label>
                            <textarea ng-model="paciente.historiaClinica.orbitas[1].conjuntiva" md-maxlength="200" md-select-on-focus></textarea>
                        </md-input-container>
                        <md-input-container class="md-icon-float md-icon-right md-block">
                            <label>Longitud (mm)</label>
                            <input ng-model="paciente.historiaClinica.orbitas[1].longitud" type="number" step="0.01">
                        </md-input-container>

                        <h1 class="md-headline">Segmento anterior (derecho)</h1>
                        <md-input-container class="md-block">
                            <label>Presion Ocular</label>
                            <textarea ng-model="paciente.historiaClinica.orbitas[1].presionOcular" md-maxlength="200" md-select-on-focus></textarea>
                        </md-input-container>
                        <md-input-container class="md-block">
                            <label>Pupila</label>
                            <textarea ng-model="paciente.historiaClinica.orbitas[1].pupila" md-maxlength="200" md-select-on-focus></textarea>
                        </md-input-container>
                        <md-switch style="padding-left: 10px" ng-model="paciente.historiaClinica.orbitas[1].anguloIridoCorneal" aria-label="Switch 1">
                            Angulo Irido Corneal
                        </md-switch>

                        <h1 class="md-headline">Segmento posterior (derecho)</h1>

                        <md-input-container class="md-block">
                            <label>Humor Vitreo</label>
                            <textarea ng-model="paciente.historiaClinica.orbitas[1].humorVitreo" md-maxlength="200" md-select-on-focus></textarea>
                        </md-input-container>

                        <md-input-container class="md-block">
                            <label>Papila</label>
                            <textarea ng-model="paciente.historiaClinica.orbitas[1].papila" md-maxlength="200" md-select-on-focus></textarea>
                        </md-input-container>

                        <md-input-container class="md-block">
                            <label>Retina Periferica</label>
                            <textarea ng-model="paciente.historiaClinica.orbitas[1].retinaPeriferica" md-maxlength="200" md-select-on-focus></textarea>
                        </md-input-container>

                        <md-input-container class="md-block">
                            <label>Retina Central</label>
                            <textarea ng-model="paciente.historiaClinica.orbitas[1].retinaCentral" md-maxlength="200" md-select-on-focus></textarea>
                        </md-input-container>

                        <h1 class="md-headline">Capa 1 (derecha)</h1>

                        <div layout="row" flex>
                            <md-input-container class="md-icon-float md-icon-right md-block" flex>
                                <label>Espesor Cornea (mm)</label>
                                <input ng-model="paciente.historiaClinica.orbitas[1].espesorCorneal" type="number" step="0.01">
                            </md-input-container>
                            <md-input-container class="md-icon-float md-icon-right md-block" flex>
                                <label>Curvatura (mm)</label>
                                <input ng-model="paciente.historiaClinica.orbitas[1].curvatura" type="number" step="0.01">
                            </md-input-container>
                            <md-input-container class="md-icon-float md-icon-right md-block" flex>
                                <label>Numero de Celulas (mm)</label>
                                <input ng-model="paciente.historiaClinica.orbitas[1].numeroDeCelulas" type="number" step="0.01">
                            </md-input-container>
                        </div>

                        <md-input-container class="md-block">
                            <label>Caracteristicas Generales</label>
                            <textarea ng-model="paciente.historiaClinica.orbitas[1].capa1Caracteristicas" md-maxlength="200" md-select-on-focus></textarea>
                        </md-input-container>

                        <h1 class="md-headline">Capa 2 (derecha)</h1>

                        <md-input-container class="md-block">
                            <label>Caracteristicas Generales</label>
                            <textarea ng-model="paciente.historiaClinica.orbitas[1].capa2Caracteristicas" md-maxlength="200" md-select-on-focus></textarea>
                        </md-input-container>

                        <h1 class="md-headline">Capa 3 (derecha)</h1>

                        <div layout="row" flex>
                            <md-input-container class="md-icon-float md-icon-right md-block" flex>
                                <label>Espesor Retina (mm)</label>
                                <input ng-model="paciente.historiaClinica.orbitas[1].espesorRetina" type="number" step="0.01">
                            </md-input-container>
                            <md-input-container class="md-icon-float md-icon-right md-block" flex>
                                <label>Espesor Fovea (mm)</label>
                                <input ng-model="paciente.historiaClinica.orbitas[1].espesorFoveal" type="number" step="0.01">
                            </md-input-container>
                        </div>

                        <md-input-container class="md-block">
                            <label>Caracteristicas Generales</label>
                            <textarea ng-model="paciente.historiaClinica.orbitas[1].capa3caracteristicas" md-maxlength="200" md-select-on-focus></textarea>
                        </md-input-container>
                    </div>
                </div>

            </md-tab>
            <md-tab label="Evolución">

                <md-button class="md-fab md-fab-bottom-right md-primary md-hue-1" style="background-color: deepskyblue"
                           ng-click="createNewEvolucion($event, evolucion, false)" aria-label="Add Component">
                    <md-icon class="material-icons">add</md-icon>
                    <md-tooltip md-direction="left">Crear Evolucion</md-tooltip>
                </md-button>
                <div style="min-height: 600px">

                    <md-table-container>
                        <table md-table class="iic-data-table">
                            <thead md-head md-order="query.order">
                            <tr md-row>
                                <th md-column >Detalle</th>
                                <th md-column >Fecha de Evolucion</th>
                            </tr>
                            </thead>
                            <tbody md-body>
                            <tr md-row
                                ng-repeat="evolucion in paciente.historiaClinica.evoluciones | filter: search | orderBy: query.order"
                                class="animate-list-item clickable" ng-click="createNewEvolucion($event, evolucion,true)">

                                <td md-cell md-highlight-text="query" md-highlight-flags="i">
                                    {{ :: evolucion.detalle}}
                                </td>
                                <td md-cell md-highlight-text="query" md-highlight-flags="i">
                                    {{ :: evolucion.fechaCreacion | date:'yyyy-MM-dd'}}
                                </td>

                            </tr>
                            </tbody>
                        </table>
                    </md-table-container>
                </div>

            </md-tab>
            <md-tab label="Estudios">


                <md-button class="md-fab md-fab-bottom-right md-primary md-hue-1" style="background-color: deepskyblue"
                           ng-click="createNewEstudio($event, estudio, false)" aria-label="Add estudio">
                    <md-icon class="material-icons">add</md-icon>
                    <md-tooltip md-direction="left">Añadir Estudio</md-tooltip>
                </md-button>
                <div style="min-height: 600px">

                    <md-table-container>
                        <table md-table class="iic-data-table">
                            <thead md-head md-order="query.order">
                            <tr md-row>
                                <th md-column >Tipo de estudio</th>
                                <th md-column >Costo</th>
                                <th md-column >Fecha de estudio</th>
                            </tr>
                            </thead>
                            <tbody md-body>
                            <tr md-row
                                ng-repeat="estudio in paciente.historiaClinica.estudios | filter: search | orderBy: query.order"
                                class="animate-list-item clickable" ng-click="createNewEstudio($event, estudio, true)">

                                <td md-cell md-highlight-flags="i">
                                    {{ :: estudio.tipoDeEstudio}}
                                </td>
                                <td md-cell md-highlight-flags="i">
                                    {{ :: '$'+estudio.costo}}
                                </td>
                                <td md-cell md-highlight-flags="i">
                                    {{ :: estudio.fechaEstudio | date:'yyyy-MM-dd'}}
                                </td>

                            </tr>
                            </tbody>
                        </table>
                    </md-table-container>
                </div>

            </md-tab>
            <md-tab label="Antecedentes">
                <div layout-padding>

                    <md-input-container class="md-block">
                        <label>Antecedentes Familiares</label>
                        <textarea ng-model="paciente.historiaClinica.antecedentesFamiliares" rows="5" md-maxlength="2000" md-select-on-focus></textarea>
                    </md-input-container>
                    <md-input-container class="md-block">

                        <label>Antecedentes Personales</label>
                        <textarea ng-model="paciente.historiaClinica.antecedentesPersonales" rows="5" md-maxlength="2000" md-select-on-focus></textarea>
                    </md-input-container>
                </div>

            </md-tab>
        </md-tabs>

    </md-card-content>

</md-card>
